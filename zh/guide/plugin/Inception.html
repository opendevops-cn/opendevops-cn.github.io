<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Inception | OpenDevOps</title>
    <meta name="generator" content="VuePress 1.9.10">
    <link rel="icon" href="/favicon.ico">
    <meta name="description" content="CoDo 快速入门文档">
    
    <link rel="preload" href="/assets/css/0.styles.9f84806b.css" as="style"><link rel="preload" href="/assets/js/app.428a4efd.js" as="script"><link rel="preload" href="/assets/js/2.d37adb28.js" as="script"><link rel="preload" href="/assets/js/1.7897e08c.js" as="script"><link rel="preload" href="/assets/js/54.a5cb4e56.js" as="script"><link rel="prefetch" href="/assets/js/10.e8d61c4f.js"><link rel="prefetch" href="/assets/js/11.2299cfc7.js"><link rel="prefetch" href="/assets/js/12.bd9d7daa.js"><link rel="prefetch" href="/assets/js/13.283fb839.js"><link rel="prefetch" href="/assets/js/14.d61c4212.js"><link rel="prefetch" href="/assets/js/15.2d9dbae8.js"><link rel="prefetch" href="/assets/js/16.52528d97.js"><link rel="prefetch" href="/assets/js/17.58004c96.js"><link rel="prefetch" href="/assets/js/18.d7b7a62d.js"><link rel="prefetch" href="/assets/js/19.a07193d5.js"><link rel="prefetch" href="/assets/js/20.577c5a47.js"><link rel="prefetch" href="/assets/js/21.0e34729d.js"><link rel="prefetch" href="/assets/js/22.1fe8bb08.js"><link rel="prefetch" href="/assets/js/23.bd1400be.js"><link rel="prefetch" href="/assets/js/24.6551a269.js"><link rel="prefetch" href="/assets/js/25.06c90476.js"><link rel="prefetch" href="/assets/js/26.1cf08589.js"><link rel="prefetch" href="/assets/js/27.533368a4.js"><link rel="prefetch" href="/assets/js/28.ea9d210a.js"><link rel="prefetch" href="/assets/js/29.ca23e064.js"><link rel="prefetch" href="/assets/js/3.bab1dcd8.js"><link rel="prefetch" href="/assets/js/30.767adae4.js"><link rel="prefetch" href="/assets/js/31.871a48cb.js"><link rel="prefetch" href="/assets/js/32.0d9d6430.js"><link rel="prefetch" href="/assets/js/33.c56dc600.js"><link rel="prefetch" href="/assets/js/34.1bbde92f.js"><link rel="prefetch" href="/assets/js/35.708ac851.js"><link rel="prefetch" href="/assets/js/36.24a950d9.js"><link rel="prefetch" href="/assets/js/37.d968d964.js"><link rel="prefetch" href="/assets/js/38.8eea30d8.js"><link rel="prefetch" href="/assets/js/39.a518dd78.js"><link rel="prefetch" href="/assets/js/4.53fd119e.js"><link rel="prefetch" href="/assets/js/40.2f998f89.js"><link rel="prefetch" href="/assets/js/41.8aac6c35.js"><link rel="prefetch" href="/assets/js/42.53d96a58.js"><link rel="prefetch" href="/assets/js/43.68988f1c.js"><link rel="prefetch" href="/assets/js/44.d22a35ad.js"><link rel="prefetch" href="/assets/js/45.4fad4e3e.js"><link rel="prefetch" href="/assets/js/46.14727477.js"><link rel="prefetch" href="/assets/js/47.659b54eb.js"><link rel="prefetch" href="/assets/js/48.6dcd3816.js"><link rel="prefetch" href="/assets/js/49.bb117324.js"><link rel="prefetch" href="/assets/js/5.72da947d.js"><link rel="prefetch" href="/assets/js/50.ab3ab352.js"><link rel="prefetch" href="/assets/js/51.d4bbbf50.js"><link rel="prefetch" href="/assets/js/52.6430a597.js"><link rel="prefetch" href="/assets/js/53.187762de.js"><link rel="prefetch" href="/assets/js/55.8c8d6083.js"><link rel="prefetch" href="/assets/js/56.8d02940a.js"><link rel="prefetch" href="/assets/js/57.562234ea.js"><link rel="prefetch" href="/assets/js/58.7999f748.js"><link rel="prefetch" href="/assets/js/59.c247d75c.js"><link rel="prefetch" href="/assets/js/6.af31a6aa.js"><link rel="prefetch" href="/assets/js/60.7de33f6e.js"><link rel="prefetch" href="/assets/js/61.4aa81803.js"><link rel="prefetch" href="/assets/js/7.c9cb4748.js"><link rel="prefetch" href="/assets/js/vendors~docsearch.01bdc736.js">
    <link rel="stylesheet" href="/assets/css/0.styles.9f84806b.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container no-sidebar"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="https://img.opendevops.cn/logo.png" alt="OpenDevOps" class="logo"> <span class="site-name can-hide">OpenDevOps</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">
  Home
</a></div><div class="nav-item"><a href="/zh/ad/" class="nav-link">
  招聘
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="部署文档" class="dropdown-title"><span class="title">部署文档</span> <span class="arrow down"></span></button> <button type="button" aria-label="部署文档" class="mobile-dropdown-title"><span class="title">部署文档</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/zh/guide-v2/2-install/docker.html" class="nav-link">
  Docker Compose 部署
</a></li><li class="dropdown-item"><!----> <a href="/zh/guide-v2/2-install/k8s.html" class="nav-link">
  Kubernetes Helm 部署
</a></li></ul></div></div><div class="nav-item"><a href="/zh/guide-v2/" class="nav-link">
  使用文档
</a></div><div class="nav-item"><a href="https://www.opendevops.cn/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  官网
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><a href="https://demo.opendevops.cn/user/login" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Demo
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><a href="https://gitee.com/opendevops/opendevops" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Gitee
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><a href="https://github.com/opendevops-cn" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="了解更多" class="dropdown-title"><span class="title">了解更多</span> <span class="arrow down"></span></button> <button type="button" aria-label="了解更多" class="mobile-dropdown-title"><span class="title">了解更多</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/zh/guide/more/faq/" class="nav-link">
  FAQ
</a></li><li class="dropdown-item"><!----> <a href="/zh/guide/more/qgroup/" class="nav-link">
  QQ群
</a></li><li class="dropdown-item"><!----> <a href="/zh/guide/more/contributor/" class="nav-link">
  贡献者
</a></li><li class="dropdown-item"><!----> <a href="/zh/guide/more/permission/" class="nav-link">
  权限文档
</a></li><li class="dropdown-item"><!----> <a href="/zh/guide/more/example/" class="nav-link">
  最佳示例
</a></li></ul></div></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">
  Home
</a></div><div class="nav-item"><a href="/zh/ad/" class="nav-link">
  招聘
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="部署文档" class="dropdown-title"><span class="title">部署文档</span> <span class="arrow down"></span></button> <button type="button" aria-label="部署文档" class="mobile-dropdown-title"><span class="title">部署文档</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/zh/guide-v2/2-install/docker.html" class="nav-link">
  Docker Compose 部署
</a></li><li class="dropdown-item"><!----> <a href="/zh/guide-v2/2-install/k8s.html" class="nav-link">
  Kubernetes Helm 部署
</a></li></ul></div></div><div class="nav-item"><a href="/zh/guide-v2/" class="nav-link">
  使用文档
</a></div><div class="nav-item"><a href="https://www.opendevops.cn/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  官网
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><a href="https://demo.opendevops.cn/user/login" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Demo
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><a href="https://gitee.com/opendevops/opendevops" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Gitee
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><a href="https://github.com/opendevops-cn" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="了解更多" class="dropdown-title"><span class="title">了解更多</span> <span class="arrow down"></span></button> <button type="button" aria-label="了解更多" class="mobile-dropdown-title"><span class="title">了解更多</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/zh/guide/more/faq/" class="nav-link">
  FAQ
</a></li><li class="dropdown-item"><!----> <a href="/zh/guide/more/qgroup/" class="nav-link">
  QQ群
</a></li><li class="dropdown-item"><!----> <a href="/zh/guide/more/contributor/" class="nav-link">
  贡献者
</a></li><li class="dropdown-item"><!----> <a href="/zh/guide/more/permission/" class="nav-link">
  权限文档
</a></li><li class="dropdown-item"><!----> <a href="/zh/guide/more/example/" class="nav-link">
  最佳示例
</a></li></ul></div></div> <!----></nav>  <!----> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="inception"><a href="#inception" class="header-anchor">#</a> Inception</h1> <blockquote><p>opendevops平台所用插件Inception部署文档， 部分文档会因为版本迭代不可用，此文档只作为参考文档，谢谢。</p></blockquote> <p><strong>1.在任何一台安装docker的主机上拉取镜像</strong></p> <blockquote><p>docker pull ss1917/inception:latest</p></blockquote> <p><strong>2.编辑inception配置文件，注意修改inception_remote四处配置项，指定一个数据库用以保存inception的备份及回滚语句</strong></p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">cat</span> <span class="token operator">&gt;</span>/etc/inc.cnf <span class="token operator">&lt;&lt;</span><span class="token string">EOF 
[inception]
general_log=1
general_log_file=/var/log/inception.log
port=6669
socket=/tmp/inc.socket
character-set-client-handshake=OFF
character-set-server=utf8
#config backup database
inception_remote_system_password=aabb1122
inception_remote_system_user=inception_web
inception_remote_backup_port=3306
inception_remote_backup_host=172.16.0.211

inception_check_dml_where=ON
inception_check_dml_limit=OFF
inception_check_dml_orderby=OFF
inception_enable_select_star=ON
inception_enable_orderby_rand=ON
inception_enable_nullable=ON
inception_enable_foreign_key=ON
inception_max_key_parts=5
inception_max_update_rows=MAX
inception_max_keys=6
inception_enable_not_innodb=ON
inception_support_charset=utf8mb4,utf8
inception_check_table_comment=OFF
inception_check_column_comment=OFF
inception_check_primary_key=OFF
inception_enable_partition_table=OFF
inception_enable_enum_set_bit=ON
inception_check_index_prefix=OFF
inception_enable_autoincrement_unsigned=ON
inception_max_char_length=16
inception_check_autoincrement_init_value=OFF
inception_check_autoincrement_datatype=OFF
inception_check_timestamp_default=OFF
inception_enable_column_charset=OFF
inception_check_autoincrement_name=OFF
inception_merge_alter_table=OFF
inception_check_column_default_value=ON
inception_enable_blob_type=ON
inception_enable_identifer_keyword=ON
bind_address=0.0.0.0
inception_check_identifier=ON
EOF</span>

</code></pre></div><p><strong>3.启动，主要参数为暴露容器6669端口，挂载本地inc.cnf文件到容器中的/etc目录下</strong></p> <blockquote><p>docker run -itd -p 6669:6669 -v /etc/inc.cnf:/etc/inc.cnf --name=inception ss1917/inception:latest</p></blockquote> <blockquote><p>在主机上测试连接6669端口成功，服务已正常启动。</p></blockquote> <p><strong>inc.cnf配置文件参数简要说明</strong></p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token punctuation">[</span>inception<span class="token punctuation">]</span>
<span class="token assign-left variable">general_log</span><span class="token operator">=</span><span class="token number">1</span>
<span class="token assign-left variable">general_log_file</span><span class="token operator">=</span>/var/log/inception.log
<span class="token assign-left variable">port</span><span class="token operator">=</span><span class="token number">6669</span>
<span class="token assign-left variable">socket</span><span class="token operator">=</span>/tmp/inc.socket
character-set-client-handshake<span class="token operator">=</span><span class="token number">0</span>
character-set-server<span class="token operator">=</span>utf8

<span class="token comment">#备份相关</span>
<span class="token comment">#需要开启binlog</span>
<span class="token assign-left variable">inception_remote_system_password</span><span class="token operator">=</span><span class="token number">123456</span>
<span class="token assign-left variable">inception_remote_system_user</span><span class="token operator">=</span>user
<span class="token assign-left variable">inception_remote_backup_port</span><span class="token operator">=</span><span class="token number">3306</span>
<span class="token assign-left variable">inception_remote_backup_host</span><span class="token operator">=</span><span class="token number">10.0</span>.0.24

<span class="token comment">#在DML语句中没有WHERE条件时，是不是要报错</span>
<span class="token assign-left variable">inception_check_dml_where</span><span class="token operator">=</span><span class="token number">1</span>
<span class="token comment">#在DML语句中使用了LIMIT时，是不是要报错</span>
<span class="token assign-left variable">inception_check_dml_limit</span><span class="token operator">=</span><span class="token number">1</span>
<span class="token comment">#在DML语句中使用了Order By时，是不是要报错</span>
inception_check_dml_orderby
<span class="token comment">#Select*时是不是要报错</span>
<span class="token assign-left variable">inception_enable_select_star</span><span class="token operator">=</span><span class="token number">1</span>
<span class="token comment">#order by rand时是不是报错</span>
<span class="token assign-left variable">inception_enable_orderby_rand</span><span class="token operator">=</span><span class="token number">1</span>
<span class="token comment">#创建或者新增列时如果列为NULL，是不是报错</span>
<span class="token assign-left variable">inception_enable_nullable</span><span class="token operator">=</span><span class="token number">1</span>
<span class="token comment">#是不是支持外键</span>
<span class="token assign-left variable">inception_enable_foreign_key</span><span class="token operator">=</span><span class="token number">1</span>
<span class="token comment">#一个索引中，列的最大个数，超过这个数目则报错(1-64)</span>
<span class="token assign-left variable">inception_max_key_parts</span><span class="token operator">=</span><span class="token number">5</span>
<span class="token comment">#在一个修改语句中，预计影响的最大行数，超过这个数就报错(1-max)</span>
<span class="token assign-left variable">inception_max_update_rows</span><span class="token operator">=</span><span class="token number">10000</span>
<span class="token comment">#一个表中，最大的索引数目，超过这个数则报错(1-1024)</span>
<span class="token assign-left variable">inception_max_keys</span><span class="token operator">=</span><span class="token number">16</span>
<span class="token comment">#建表指定的存储引擎不为Innodb，不报错</span>
<span class="token assign-left variable">inception_enable_not_innodb</span><span class="token operator">=</span><span class="token number">0</span>
<span class="token comment">#表示在建表或者建库时支持的字符集，如果需要多个，则用逗号分隔，影响的范围是建表、设置会话字符集、修改表字符集属性等</span>
<span class="token assign-left variable">inception_support_charset</span><span class="token operator">=</span>utf8mb4
<span class="token comment">#建表时，表没有注释时报错</span>
<span class="token assign-left variable">inception_check_table_comment</span><span class="token operator">=</span><span class="token number">1</span>
<span class="token comment">#建表时，列没有注释时报错</span>
<span class="token assign-left variable">inception_check_column_comment</span><span class="token operator">=</span><span class="token number">1</span>
<span class="token comment">#建表时，如果没有主键，则报错</span>
<span class="token assign-left variable">inception_check_primary_key</span><span class="token operator">=</span><span class="token number">1</span>
<span class="token comment">#是不是支持分区表</span>
<span class="token assign-left variable">inception_enable_partition_table</span><span class="token operator">=</span><span class="token number">0</span>
<span class="token comment">#是不是支持enum,set,bit数据类型</span>
<span class="token assign-left variable">inception_enable_enum_set_bit</span><span class="token operator">=</span><span class="token number">0</span>
<span class="token comment">#是不是要检查索引名字前缀为&quot;idx_&quot;，检查唯一索引前缀是不是&quot;uniq_&quot;</span>
<span class="token assign-left variable">inception_check_index_prefix</span><span class="token operator">=</span><span class="token number">1</span>
<span class="token comment">#自增列是不是要为无符号型</span>
<span class="token assign-left variable">inception_enable_autoincrement_unsigned</span><span class="token operator">=</span><span class="token number">1</span>
<span class="token comment">#当char类型的长度大于这个值时，就提示将其转换为VARCHAR(1-max)</span>
<span class="token assign-left variable">inception_max_char_length</span><span class="token operator">=</span><span class="token number">16</span>
<span class="token comment">#当建表时自增列的值指定的不为1，则报错</span>
<span class="token assign-left variable">inception_check_autoincrement_init_value</span><span class="token operator">=</span><span class="token number">1</span>
<span class="token comment">#当建表时自增列的类型不为int或者bigint时报错</span>
<span class="token assign-left variable">inception_check_autoincrement_datatype</span><span class="token operator">=</span><span class="token number">1</span>
<span class="token comment">#建表时，如果没有为timestamp类型指定默认值，则报错</span>
<span class="token assign-left variable">inception_check_timestamp_default</span><span class="token operator">=</span><span class="token number">0</span>
<span class="token comment">#允许列自己设置字符集</span>
<span class="token assign-left variable">inception_enable_column_charset</span><span class="token operator">=</span><span class="token number">0</span>
<span class="token comment">#建表时，如果指定的自增列的名字不为ID，则报错，说明是有意义的，给提示</span>
<span class="token assign-left variable">inception_check_autoincrement_name</span><span class="token operator">=</span><span class="token number">1</span>
<span class="token comment">#在多个改同一个表的语句出现时，报错，提示合成一个</span>
<span class="token assign-left variable">inception_merge_alter_table</span><span class="token operator">=</span><span class="token number">1</span>
<span class="token comment">#检查在建表、修改列、新增列时，新的列属性是不是要有默认值</span>
<span class="token assign-left variable">inception_check_column_default_value</span><span class="token operator">=</span><span class="token number">1</span>
<span class="token comment">#检查是不是支持BLOB字段，包括建表、修改列、新增列操作</span>
<span class="token assign-left variable">inception_enable_blob_type</span><span class="token operator">=</span><span class="token number">1</span>
<span class="token comment">#检查在SQL语句中，是不是有标识符被写成MySQL的关键字，默认值为报警。</span>
<span class="token assign-left variable">inception_enable_identifer_keyword</span><span class="token operator">=</span><span class="token number">1</span>
<span class="token comment">#这个参数的作用是为了匹配Python客户端每次自动设置auto_commit=0的，如果取消则会报错，针对Inception本身没有实际意义</span>
<span class="token comment">#auto_commit=0</span>
<span class="token comment">#这个参数实际上就是MySQL数据库原来的参数，因为Incpetion没有权限验证过程，那么为了实现更安全的访问，可以给Inception服务器的这个参数设置某台机器（Inception上层的应用程序）不地址，这样</span>
<span class="token comment">#其它非法程序是不可访问的，那么再加上Inception执行的选项中的用户名密码，对MySQL就更加安全</span>
<span class="token assign-left variable">bind_address</span><span class="token operator">=</span><span class="token number">127.0</span>.0.1
<span class="token comment">#inception_user</span>
<span class="token comment">#inception_password</span>
<span class="token comment">#inception_enable_sql_statistic</span>
<span class="token comment">#inception_read_only</span>
<span class="token comment">#打开与关闭Inception对SQL语句中各种名字的检查，如果设置为ON，则如果发现名字中存在除数字字母下划线之外的字符时，报Identifier &quot;invalidname&quot; is invalid, valid options: [a-z,A-Z,0-9,_].</span>
<span class="token assign-left variable">inception_check_identifier</span><span class="token operator">=</span><span class="token number">1</span>

<span class="token comment">#inception_osc_min_table_size=1</span>
<span class="token comment">#inception_osc_bin_dir=/data/temp</span>
<span class="token comment">#inception_osc_chunk_time=0.1</span>

</code></pre></div><p><strong>Inception使用方法</strong></p> <blockquote><p>1.Inception规定，在语句的最开始位置，要加上inception_magic_start;语句，在执行语句块的最后加上inception_magic_commit;语句，这2个语句在 Inception 中都是合法的、具有标记性质的可被正确解析的 SQL 语句。被包围起来的所有需要审核或者执行的语句都必须要在每条之后加上分号，其实就是批量执行SQL语句。（包括use database语句之后也要加分号，这点与 MySQL 客户端不同），不然存在语法错误</p></blockquote> <blockquote><p>2.目前执行只支持通过C/C++接口、Python接口来对Inception访问，这一段必须是一次性的通过执行接口提交给Inception，那么在处理完成之后，Inception会返回一个结果集，来告诉我们这些语句中存在什么错误，或者是完全正常等等。</p></blockquote> <p><strong>下面是一个python脚本访问inception的简单例子，指定连接测试的mysql服务器为10.0.0.24</strong></p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">cat</span> <span class="token operator">&gt;</span>inc-mysql.py <span class="token operator">&lt;&lt;</span><span class="token string">EOF
#!/usr/bin/env python
#coding=utf8
import MySQLdb
sql='''/*--user=root;--password=123456;--host=10.0.0.24;--execute=1;--port=3306;*/\
    inception_magic_start;\
    use test;\
    CREATE TABLE shinezone(id int);\
    inception_magic_commit;'''
#print sql
try:
        conn=MySQLdb.connect(host='127.0.0.1',user='',passwd='',db='',port=6669)
        cur=conn.cursor()
        ret=cur.execute(sql)
        result=cur.fetchall()
        num_fields = len(cur.description)
        field_names = [i[0] for i in cur.description]
        print field_names
        for row in result:
                print row[0], &quot;|&quot;,row[1],&quot;|&quot;,row[2],&quot;|&quot;,row[3],&quot;|&quot;,row[4],&quot;|&quot;,row[5],&quot;|&quot;,row[6],&quot;|&quot;,row[7],&quot;|&quot;,row[8],&quot;|&quot;,row[9],&quot;|&quot;,row[10]
        cur.close()
        conn.close()
except MySQLdb.Error,e:
             print &quot;Mysql Error %d: %s&quot; % (e.args[0], e.args[1])
EOF</span>

</code></pre></div><p><strong>执行脚本</strong></p> <blockquote><p>python inc-mysql.py</p></blockquote> <blockquote><p>更改建表语句:</p></blockquote> <blockquote><p>CREATE TABLE shinezone(id int comment 'test' primary key) engine=innodb DEFAULT CHARSET=utf8mb4 comment '测试';\</p></blockquote> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">cat</span> <span class="token operator">&gt;</span>inc-mysql.py <span class="token operator">&lt;&lt;</span><span class="token string">EOF
#!/usr/bin/env python
#coding=utf8
import MySQLdb
sql='''/*--user=root;--password=123456;--host=10.0.0.24;--execute=1;--port=3306;*/\
    inception_magic_start;\
    use test;\
    CREATE TABLE shinezone(id int comment 'test' primary key) engine=innodb DEFAULT CHARSET=utf8mb4 comment '测试';\
    inception_magic_commit;'''
#print sql
try:
        conn=MySQLdb.connect(host='127.0.0.1',user='',passwd='',db='',port=6669)
        cur=conn.cursor()
        ret=cur.execute(sql)
        result=cur.fetchall()
        num_fields = len(cur.description)
        field_names = [i[0] for i in cur.description]
        print field_names
        for row in result:
                print row[0], &quot;|&quot;,row[1],&quot;|&quot;,row[2],&quot;|&quot;,row[3],&quot;|&quot;,row[4],&quot;|&quot;,row[5],&quot;|&quot;,row[6],&quot;|&quot;,row[7],&quot;|&quot;,row[8],&quot;|&quot;,row[9],&quot;|&quot;,row[10]
        cur.close()
        conn.close()
except MySQLdb.Error,e:
             print &quot;Mysql Error %d: %s&quot; % (e.args[0], e.args[1])
EOF</span>

</code></pre></div><blockquote><p>执行下脚本，同时生成回滚语句，记录在inception备份库中.</p></blockquote> <blockquote><p>备份机器的库名组成是由线上机器的 IP 地址的点换成下划线，再加上端口号，再加上库名三部分，在生成的备份中,可以看到inception自动生成的回滚语句</p></blockquote></div> <footer class="page-edit"><!----> <!----></footer> <!----> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.428a4efd.js" defer></script><script src="/assets/js/2.d37adb28.js" defer></script><script src="/assets/js/1.7897e08c.js" defer></script><script src="/assets/js/54.a5cb4e56.js" defer></script>
  </body>
</html>
