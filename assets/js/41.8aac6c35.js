(window.webpackJsonp=window.webpackJsonp||[]).push([[41],{446:function(s,a,t){"use strict";t.r(a);var e=t(25),r=Object(e.a)({},(function(){var s=this,a=s._self._c;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("h1",{attrs:{id:"docker-compose-部署"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#docker-compose-部署"}},[s._v("#")]),s._v(" Docker Compose 部署")]),s._v(" "),a("h2",{attrs:{id:"部署方式"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#部署方式"}},[s._v("#")]),s._v(" 部署方式")]),s._v(" "),a("ul",[a("li",[s._v("开发环境使用docker-compose方式, 完成管理后台、网关服务、前端项目、任务平台、配置中心、Agent-server的部署.")]),s._v(" "),a("li",[s._v("部署时先部署中间件, 中间件正常运行后部署应用.")])]),s._v(" "),a("h2",{attrs:{id:"快速部署"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#快速部署"}},[s._v("#")]),s._v(" 快速部署")]),s._v(" "),a("p",[s._v("推荐使用 root 用户进行部署")]),s._v(" "),a("h3",{attrs:{id:"_1-准备-docker-环境"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-准备-docker-环境"}},[s._v("#")]),s._v(" 1. 准备 docker 环境")]),s._v(" "),a("p",[s._v("安装 Docker 和 Docker-compose")]),s._v(" "),a("ul",[a("li",[s._v("Docker 安装命令参考 "),a("strong",[s._v("[Rocky Linux 9 操作系统]")])])]),s._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" dnf "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" dnf-plugins-core\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" dnf config-manager --add-repo https://download.docker.com/linux/centos/docker-ce.repo\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" dnf "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" docker-ce docker-ce-cli containerd.io\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" systemctl start "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" systemctl "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("enable")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v("\n")])])]),a("ul",[a("li",[a("p",[s._v("docker-compose 安装命令参考 "),a("strong",[s._v("[Rocky Linux 9 操作系统]")])]),s._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("curl")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-L")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"https://github.com/docker/compose/releases/download/v2.5.0/docker-compose-'),a("span",{pre:!0,attrs:{class:"token variable"}},[a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$(")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("uname")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-s")]),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v(")")])]),s._v("-"),a("span",{pre:!0,attrs:{class:"token variable"}},[a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$(")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("uname")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-m")]),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v(")")])]),s._v('"')]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-o")]),s._v(" /usr/local/bin/docker-compose\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("chmod")]),s._v(" +x /usr/local/bin/docker-compose\n")])])])])]),s._v(" "),a("h3",{attrs:{id:"_2-克隆仓库"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-克隆仓库"}},[s._v("#")]),s._v(" 2. 克隆仓库")]),s._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" clone https://github.com/opendevops-cn/codo-deploy-docs.git\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("cd")]),s._v(" ./codo-deploy-docs/docker-deploy\n")])])]),a("h3",{attrs:{id:"_3-修改配置-可跳过"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-修改配置-可跳过"}},[s._v("#")]),s._v(" 3. 修改配置 [可跳过]")]),s._v(" "),a("p",[a("a",{attrs:{href:".env"}},[s._v(".env")]),s._v("   中已经配置项目中所需的账密信息，不修改则使用默认配置")]),s._v(" "),a("h3",{attrs:{id:"_4-数据库初始化-可跳过"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_4-数据库初始化-可跳过"}},[s._v("#")]),s._v(" 4. 数据库初始化 [可跳过]")]),s._v(" "),a("p",[a("a",{attrs:{href:"db_init.sql"}},[s._v("db_init.sql")]),s._v(" 在 Docker 部署 MySQL 时默认导入。")]),s._v(" "),a("h3",{attrs:{id:"_5-部署中间件"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_5-部署中间件"}},[s._v("#")]),s._v(" 5. 部署中间件")]),s._v(" "),a("p",[s._v("如需依赖已有中间件则需要修改 "),a("a",{attrs:{href:".env"}},[s._v(".env")]),s._v(" 配置")]),s._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sh")]),s._v(" ./deploy_middleware.sh\n")])])]),a("h3",{attrs:{id:"_6-启动服务并初始化"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_6-启动服务并初始化"}},[s._v("#")]),s._v(" 6. 启动服务并初始化")]),s._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sh")]),s._v(" ./init_app.sh\n")])])]),a("h3",{attrs:{id:"_7-管理后台创建超级用户"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_7-管理后台创建超级用户"}},[s._v("#")]),s._v(" 7. 管理后台创建超级用户")]),s._v(" "),a("p",[s._v("默认: "),a("strong",[s._v("admin")])]),s._v(" "),a("p",[s._v("密码: "),a("strong",[s._v("1qazXSW@")])]),s._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("exec")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-it")]),s._v(" codo_mg python3 manage.py createsuperuser\n")])])])])}),[],!1,null,null,null);a.default=r.exports}}]);