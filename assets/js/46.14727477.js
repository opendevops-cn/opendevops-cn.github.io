(window.webpackJsonp=window.webpackJsonp||[]).push([[46],{455:function(e,s,t){"use strict";t.r(s);var a=t(25),o=Object(a.a)({},(function(){var e=this,s=e._self._c;return s("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[s("h1",{attrs:{id:"docker-compose部署"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#docker-compose部署"}},[e._v("#")]),e._v(" Docker Compose部署")]),e._v(" "),s("div",{staticClass:"custom-block tip"},[s("p",{staticClass:"custom-block-title"},[e._v("提示")]),e._v(" "),s("p",[e._v("完全抽象出来的本地部署方式，不理解Docker的同学可以使用本文的进行参考")]),e._v(" "),s("p",[e._v("部署视频参考：")]),e._v(" "),s("p",[e._v("视频会在业余时间持续录制，更多视频可以参考Up主空间：https://space.bilibili.com/388245257/")]),e._v(" "),s("ul",[s("li",[s("a",{attrs:{href:"https://www.bilibili.com/video/BV1BL4y1a7TU/",target:"_blank",rel:"noopener noreferrer"}},[e._v("部署安装教程"),s("OutboundLink")],1)]),e._v(" "),s("li",[s("a",{attrs:{href:"https://www.bilibili.com/video/BV1rp4y1v7fa/",target:"_blank",rel:"noopener noreferrer"}},[e._v("快速了解视频"),s("OutboundLink")],1)]),e._v(" "),s("li",[s("a",{attrs:{href:"https://www.bilibili.com/video/BV1Sy4y137md/",target:"_blank",rel:"noopener noreferrer"}},[e._v("二次开发教程"),s("OutboundLink")],1)])])]),e._v(" "),s("h2",{attrs:{id:"项目简介"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#项目简介"}},[e._v("#")]),e._v(" 项目简介")]),e._v(" "),s("ul",[s("li",[s("p",[e._v("本项目采用微服务架构，完成全球一站式运维体系建设。")])]),e._v(" "),s("li",[s("p",[e._v("Demo 地址：https://demo.opendevops.cn/user/login  "),s("code",[e._v("用户：demo 密码：2ZbFYNv9WibWcR7GB6kcEY")])])])]),e._v(" "),s("div",{staticClass:"language-text extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("codo\n├── codo-admin # 管理后台\n├── codo-agent-server # 底层管控\n├── codo-cloud-agent-operator # 执行云原生任务\n├── codo-cmdb # 数据资产、多云资源管理\n├── codo-cnmp # 云原生管理平台\n├── codo-flow-servers # 任务平台、作业调度执行\n├── codo-monitor # 可观测平台\n├── codo-notice #  通知中心\n├── codo-frontend # 前端应用、流量入口(API流量 先进这里再路由到 gateway)\n├── codo-gateway # API网关\n└── codo-kerrigan # 配置中心\n\n")])])]),s("h2",{attrs:{id:"环境依赖"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#环境依赖"}},[e._v("#")]),e._v(" 环境依赖")]),e._v(" "),s("ul",[s("li",[e._v("操作系统：Rocky Linux 9.1以上 x86_64")]),e._v(" "),s("li",[e._v("Docker版本：最新稳定版本")]),e._v(" "),s("li",[e._v("Docker Compose版本：最新稳定版本")])]),e._v(" "),s("p",[s("strong",[e._v("优化系统")])]),e._v(" "),s("p",[e._v("注意：")]),e._v(" "),s("ul",[s("li",[e._v("如果你的系统是新的，我们建议你先优化下系统，同样我们也提供了"),s("a",{attrs:{href:"https://github.com/opendevops-cn/opendevops/tree/master/scripts/system_init_v1.sh",target:"_blank",rel:"noopener noreferrer"}},[e._v("优化系统脚本"),s("OutboundLink")],1)]),e._v(" "),s("li",[e._v("以下基础环境中，若你的系统中已经存在可跳过，直接配置，建议使用我们推荐的版本")])]),e._v(" "),s("h2",{attrs:{id:"快速部署"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#快速部署"}},[e._v("#")]),e._v(" 快速部署")]),e._v(" "),s("ul",[s("li",[e._v("开发环境使用docker-compose方式, 完成管理后台、网关服务、前端项目、任务平台、配置中心、Agent-server的部署.")]),e._v(" "),s("li",[e._v("部署时先部署中间件, 中间件正常运行后部署应用.")]),e._v(" "),s("li",[e._v("安装 Docker 和 Docker-compose")])]),e._v(" "),s("blockquote",[s("p",[e._v("Docker安装命令参考 "),s("strong",[e._v("[Rocky Linux 9 操作系统]")])])]),e._v(" "),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[e._v("sudo")]),e._v(" dnf "),s("span",{pre:!0,attrs:{class:"token function"}},[e._v("install")]),e._v(" dnf-plugins-core\n"),s("span",{pre:!0,attrs:{class:"token function"}},[e._v("sudo")]),e._v(" dnf config-manager --add-repo https://download.docker.com/linux/centos/docker-ce.repo\n"),s("span",{pre:!0,attrs:{class:"token function"}},[e._v("sudo")]),e._v(" dnf "),s("span",{pre:!0,attrs:{class:"token function"}},[e._v("install")]),e._v(" docker-ce docker-ce-cli containerd.io\n"),s("span",{pre:!0,attrs:{class:"token function"}},[e._v("sudo")]),e._v(" systemctl start "),s("span",{pre:!0,attrs:{class:"token function"}},[e._v("docker")]),e._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[e._v("sudo")]),e._v(" systemctl "),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[e._v("enable")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[e._v("docker")]),e._v("\n")])])]),s("blockquote",[s("p",[e._v("docker-compose安装命令参考 "),s("strong",[e._v("[Rocky Linux 9 操作系统]")])])]),e._v(" "),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[e._v("sudo")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[e._v("curl")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[e._v("-L")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[e._v('"https://github.com/docker/compose/releases/download/v2.5.0/docker-compose-'),s("span",{pre:!0,attrs:{class:"token variable"}},[s("span",{pre:!0,attrs:{class:"token variable"}},[e._v("$(")]),s("span",{pre:!0,attrs:{class:"token function"}},[e._v("uname")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[e._v("-s")]),s("span",{pre:!0,attrs:{class:"token variable"}},[e._v(")")])]),e._v("-"),s("span",{pre:!0,attrs:{class:"token variable"}},[s("span",{pre:!0,attrs:{class:"token variable"}},[e._v("$(")]),s("span",{pre:!0,attrs:{class:"token function"}},[e._v("uname")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[e._v("-m")]),s("span",{pre:!0,attrs:{class:"token variable"}},[e._v(")")])]),e._v('"')]),e._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[e._v("-o")]),e._v(" /usr/local/bin/docker-compose\n"),s("span",{pre:!0,attrs:{class:"token function"}},[e._v("sudo")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[e._v("chmod")]),e._v(" +x /usr/local/bin/docker-compose\n")])])]),s("hr"),e._v(" "),s("p",[s("strong",[e._v("克隆仓库")])]),e._v(" "),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[e._v("mkdir")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[e._v("-p")]),e._v(" /opt/codo/ "),s("span",{pre:!0,attrs:{class:"token operator"}},[e._v("&&")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[e._v("cd")]),e._v(" /opt/codo/\n"),s("span",{pre:!0,attrs:{class:"token function"}},[e._v("git")]),e._v(" clone https://github.com/opendevops-cn/codo-deploy-docs.git\n"),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[e._v("cd")]),e._v(" codo-deploy-docs/docker-deploy\n")])])]),s("ul",[s("li",[e._v("配置文件修改【可选】"),s("a",{attrs:{href:"https://github.com/opendevops-cn/codo-deploy-docs/blob/main/docker-deploy/.env",target:"_blank",rel:"noopener noreferrer"}},[e._v(".env"),s("OutboundLink")],1),e._v(" "),s("span",{staticStyle:{color:"red"}},[e._v("\n中已经配置项目中所需的账密信息，不修该则使用默认配置")])]),e._v(" "),s("li",[e._v("数据库初始化【可选】："),s("a",{attrs:{href:"https://github.com/opendevops-cn/codo-deploy-docs/blob/main/docker-deploy/db_init.sql",target:"_blank",rel:"noopener noreferrer"}},[e._v("db_init.sql"),s("OutboundLink")],1),e._v(" "),s("span",{staticStyle:{color:"red"}},[e._v(" 在 Docker 部署 MySQL 时默认导入。")])])]),e._v(" "),s("hr"),e._v(" "),s("ul",[s("li",[e._v("部署中间件 如需依赖已有中间件则需要修改"),s("a",{attrs:{href:".env"}},[e._v(".env")]),e._v("配置")])]),e._v(" "),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[e._v("sh")]),e._v(" ./deploy_middleware.sh\n")])])]),s("hr"),e._v(" "),s("ul",[s("li",[e._v("启动服务并初始化")])]),e._v(" "),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[e._v("sh")]),e._v(" ./init_app.sh\n")])])]),s("ul",[s("li",[e._v("管理后台创建超级用户")])]),e._v(" "),s("blockquote",[s("p",[e._v("默认的admin 密码为 1qazXSW@")])]),e._v(" "),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[e._v("docker")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[e._v("exec")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[e._v("-it")]),e._v(" codo_mg python3 manage.py createsuperuser\n")])])])])}),[],!1,null,null,null);s.default=o.exports}}]);